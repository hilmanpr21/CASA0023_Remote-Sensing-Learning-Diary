<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.115">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>RS_Learning_diary - 8&nbsp; week_08 - Temperature and Policy</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./summary.html" rel="next">
<link href="./week07.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">week_08 - Temperature and Policy</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">RS_Learning_diary</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Welcome to my learning diaries</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week01.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">week 01 - Remote Sensing Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week02.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">week02 - Sensor Satellite Presentation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week03.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">week03 - Remote Sensing Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week04.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">week04 - Policy</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week05.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">week_05 - Google Earth Engine</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week06.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">week_06 - Classification</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week07.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">week_07 - Classification Continue</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week08.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">week_08 - Temperature and Policy</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Summary</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="toc-section-number">8.1</span>  Summary</a>
  <ul class="collapse">
  <li><a href="#global-policy" id="toc-global-policy" class="nav-link" data-scroll-target="#global-policy"><span class="toc-section-number">8.1.1</span>  Global Policy</a></li>
  <li><a href="#utilising-eo-data" id="toc-utilising-eo-data" class="nav-link" data-scroll-target="#utilising-eo-data"><span class="toc-section-number">8.1.2</span>  Utilising EO data</a></li>
  </ul></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="toc-section-number">8.2</span>  Application</a>
  <ul class="collapse">
  <li><a href="#urban-heat-vulnerability" id="toc-urban-heat-vulnerability" class="nav-link" data-scroll-target="#urban-heat-vulnerability"><span class="toc-section-number">8.2.1</span>  Urban Heat Vulnerability</a></li>
  </ul></li>
  <li><a href="#reflection" id="toc-reflection" class="nav-link" data-scroll-target="#reflection"><span class="toc-section-number">8.3</span>  Reflection</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">week_08 - Temperature and Policy</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="summary" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="summary"><span class="header-section-number">8.1</span> Summary</h2>
<p>In this week we will discuss about Urban heat Island and how city handle this issue. A phenomena when urban area is significantly hotter than rural area on its surrounding is called Urban Heat Island (UHI) <span class="citation" data-cites="takebayashiChapterBackgroundPurpose2020">(<a href="references.html#ref-takebayashiChapterBackgroundPurpose2020" role="doc-biblioref">Takebayashi and Moriyama, 2020</a>)</span>.</p>
<p><img src="week_08_files/UHI.png" class="img-fluid" style="width:100.0%" alt="Urban Heat Island"> source: <a href="https://earth.org/data_visualization/urban-heat-islands/">Earth.Org</a></p>
<p>Urban heat island are caused by many factors: - Limited vegetation or natural landscape - Urban material absorb and emit solar heat - Building dimensions and configuration trap wind flow that absorb and release heat - Human activities, such as, vehicle and AC usage - Weather and geography Generally, <strong>highly concentrated man-made material and limited natural landscape</strong> is the major factors of UHI <span class="citation" data-cites="usepaLearnHeatIslands2014">(<a href="references.html#ref-usepaLearnHeatIslands2014" role="doc-biblioref">US EPA, 2014</a>)</span>.</p>
<p>Urban Heat Island bring a lot of negative impact on social, economy and environmental globally. For example, heatwave in 1998 in Shanghai increase the mortality rate in urban area up to 27.3/100.000, compared to 7/100.000 in rural area []. Heatwaves in 2003, killed 35.000 lives in Europe with 15.000 fatalities in France alone <span class="citation" data-cites="tanUrbanHeatIsland2010">(<a href="references.html#ref-tanUrbanHeatIsland2010" role="doc-biblioref">Tan <em>et al.</em>, 2010</a>)</span>. Santamouris <span class="citation" data-cites="santamourisImpactUrbanHeat2015">(<a href="references.html#ref-santamourisImpactUrbanHeat2015" role="doc-biblioref">2015</a>)</span>, stated that one degree increase of temperature, potentially increase of electrical demand between 0.5%-8.5%.</p>
<section id="global-policy" class="level3" data-number="8.1.1">
<h3 data-number="8.1.1" class="anchored" data-anchor-id="global-policy"><span class="header-section-number">8.1.1</span> Global Policy</h3>
<p>Urban Heat Island happens globally. A lot of global policy has implicitly and explicitly put this issue into an account. One of the target in goal number 11 of Sustainable Development Goals mention:</p>
<blockquote class="blockquote">
<p><strong>Cleaner, greener cities</strong></p>
<p>- Investing in parks and green spaces in urban areas will help to amelioratethe urban heat island effect and improve air quality in urban spaces.</p>
</blockquote>
<section id="beat-the-heat-handbook" class="level4" data-number="8.1.1.1">
<h4 data-number="8.1.1.1" class="anchored" data-anchor-id="beat-the-heat-handbook"><span class="header-section-number">8.1.1.1</span> Beat the heat handbook</h4>
<p>Moreover, United Nation Environment Program has released <strong>Beat the Heat handbook</strong>. The hand book gives guideline and framework for planner to help cooling their cities. it gives systemic approach to address urban cooling.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="week_08_files/UHI_Flow.png" class="img-fluid figure-img" style="width:80.0%"></p>
<p></p><figcaption class="figure-caption">Beat the Heat Roadmap</figcaption><p></p>
</figure>
</div>
<p>source: <a href="https://www.unep.org/ndc/resources/report/beating-heat-sustainable-cooling-handbook-cities">Beating the Heat: A Sustainable Cooling Handbook for Cities | NDC Action Project (unep.org)</a></p>
<p>It also has matrix of city interventions for sustainable urban cooling like shown in the image below</p>
<p><img src="week_08_files/UHI_matix.png" class="img-fluid" style="width:80.0%" alt="Intervention Matrix"> Source: [Beating the Heat: A Sustainable Cooling Handbook for Cities (https://www.unep.org/resources/report/beating-heat-sustainable-cooling-handbook-cities)</p>
<p>Although this handbook presents various intervention alternative with over 20 cities as case study and examples, it is not easy for local government to follow because different cities has different heat temperature and different context. As mentioned earlier that geography can cause different heat in urban context. Dissimilar context and issue should have different policy and planning to solve Urban Heat Island issue. Therefore, assessment on existing environmental condition has to be done with right method and right approach to understand specific solution that the city needs.</p>
</section>
</section>
<section id="utilising-eo-data" class="level3" data-number="8.1.2">
<h3 data-number="8.1.2" class="anchored" data-anchor-id="utilising-eo-data"><span class="header-section-number">8.1.2</span> Utilising EO data</h3>
<p>to assess heat in the city we can utilise earth observation data, like what Fremantle did in their Urban Forest Plan. However, if we are not critical in using EO data for assessing heat, it will fail telling the pain point comprehensively like Fremantle. In Fremantle’s assessment process, they only use one temperature image and aggregated the data. Moreover, it is not reproducible and not clear on what kind of assumption they made in their assessment process.</p>
<p>Thus, in the application part we will discuss some previous research that have utilised EO data and linked with policies to tackle UHI</p>
</section>
</section>
<section id="application" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="application"><span class="header-section-number">8.2</span> Application</h2>
<section id="urban-heat-vulnerability" class="level3" data-number="8.2.1">
<h3 data-number="8.2.1" class="anchored" data-anchor-id="urban-heat-vulnerability"><span class="header-section-number">8.2.1</span> Urban Heat Vulnerability</h3>
<p>To help decision makers and city planners mitigating UHI phenomena, a reliable UHI vulnerability map is required. UHI vulnerability maps tells us which area in the city that are at risk of UHI. <span class="citation" data-cites="sidiquiUrbanHeatIsland2022">Sidiqui <em>et al.</em> (<a href="references.html#ref-sidiquiUrbanHeatIsland2022" role="doc-biblioref">2022</a>)</span> used high-resolution spatial data, advanced geospatial tools, and socio-demographic data to make UHI vulnerability map ofthe City of Greater Geelong, Australia. It utilise airborne thermal data from Landsat and aerial imagery data to make UHI index maps which then indicated significant hotspot on high building density, industrial areas, and constructed sites. The UHI index maps, then combined with 20 input indicators of heat exposure, population sensitivity, and mobility/adaptive capacity to make Urban Heat Vulnerability (UHV) maps.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="week_08_files/UHI_vulnerability.png" class="img-fluid figure-img" style="width:80.0%"></p>
<p></p><figcaption class="figure-caption">Urban Heat Vulnerability Map</figcaption><p></p>
</figure>
</div>
<p>source: <span class="citation" data-cites="sidiquiUrbanHeatIsland2022">(<a href="references.html#ref-sidiquiUrbanHeatIsland2022" role="doc-biblioref">Sidiqui <em>et al.</em>, 2022</a>)</span></p>
<p>High vulnerability maps are shown with red (warmer) colour which concentrated on high building density and high population density areas.</p>
<p>This proposed methodology show comprehensive approach by considering multitemporal input data. The landsat scene data were taken from hotest days of summer in 2016 and 2017. <span class="citation" data-cites="techerUrbanHeatIsland2023">(<a href="references.html#ref-techerUrbanHeatIsland2023" role="doc-biblioref">Técher, Ait Haddou and Aguejdad, 2023</a>)</span> has done the similar methodology to assess UHI in # Montpellier Méditerranée, France but with 15 indicators. It indicates that this methodology is reproducible.</p>
<p><a href="https://www.sciencedirect.com/science/article/pii/S1618866713000642">Mitigating surface urban heat island by a tree protection policy: A case study of The Woodland, Texas, USA - ScienceDirect</a></p>
</section>
</section>
<section id="reflection" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="reflection"><span class="header-section-number">8.3</span> Reflection</h2>
<ul>
<li>from this week we have learnt that Urban heat Island is a global phenomena that has to be mitigated immediately. Some of global policy has take this issue into an account. United Environment program has release <strong>Beat the Heat Handbook</strong> as a guideline for planner to help cooling their cities. Although the handbook suggested a lot of intervention and example from cities around the world. Local government might having difficulties to follow the guideline because it has a lot of pages and different urban context might require different intervention.</li>
<li>Thus, EO data can be utilised to assess UHI vulnerability in a city like it was done by <span class="citation" data-cites="sidiquiUrbanHeatIsland2022">(<a href="references.html#ref-sidiquiUrbanHeatIsland2022" role="doc-biblioref">Sidiqui <em>et al.</em>, 2022</a>)</span></li>
<li><span class="citation" data-cites="sidiquiUrbanHeatIsland2022">Sidiqui <em>et al.</em> (<a href="references.html#ref-sidiquiUrbanHeatIsland2022" role="doc-biblioref">2022</a>)</span> application are really helpful to assess the city temperature context and it shown that it is reproducible. What local government can do is adjusting 20 indicators of this methods to adapt with their city context.</li>
<li>Moreover, data that being used in making <strong>UH vulnerability maps is free</strong> so <strong>developing countries</strong> who usually has limited budget <strong>can replicate this method</strong></li>
<li>however, making vulnerability maps might not solve the problem right away but it can bring a really beneficial information. Thus, local government can make a specific action plan based on vulnerability and urgency degree.</li>
</ul>


<div id="refs" class="references csl-bib-body" role="doc-bibliography" style="display: none">
<div id="ref-santamourisImpactUrbanHeat2015" class="csl-entry" role="doc-biblioentry">
Santamouris, M. <em>et al.</em> (2015) <span>“On the impact of urban heat island and global warming on the power demand and electricity consumption of buildings—<span>A</span> review,”</span> <em>Energy and Buildings</em>, 98, pp. 119–124. doi: <a href="https://doi.org/10.1016/j.enbuild.2014.09.052">10.1016/j.enbuild.2014.09.052</a>.
</div>
<div id="ref-sidiquiUrbanHeatIsland2022" class="csl-entry" role="doc-biblioentry">
Sidiqui, P. <em>et al.</em> (2022) <span>“Urban <span>Heat Island</span> vulnerability mapping using advanced <span>GIS</span> data and tools,”</span> <em>Journal of Earth System Science</em>, 131(4), p. 266. doi: <a href="https://doi.org/10.1007/s12040-022-02005-w">10.1007/s12040-022-02005-w</a>.
</div>
<div id="ref-takebayashiChapterBackgroundPurpose2020" class="csl-entry" role="doc-biblioentry">
Takebayashi, H. and Moriyama, M. (2020) <span>“Chapter 1 - <span>Background</span> and purpose,”</span> in Takebayashi, H. and Moriyama, M. (eds.) <em>Adaptation <span>Measures</span> for <span>Urban Heat Islands</span></em>. <span>Academic Press</span>, pp. 1–8. doi: <a href="https://doi.org/10.1016/B978-0-12-817624-5.00001-4">10.1016/B978-0-12-817624-5.00001-4</a>.
</div>
<div id="ref-tanUrbanHeatIsland2010" class="csl-entry" role="doc-biblioentry">
Tan, J. <em>et al.</em> (2010) <span>“The urban heat island and its impact on heat waves and human health in <span>Shanghai</span>,”</span> <em>International Journal of Biometeorology</em>, 54(1), pp. 75–84. doi: <a href="https://doi.org/10.1007/s00484-009-0256-x">10.1007/s00484-009-0256-x</a>.
</div>
<div id="ref-techerUrbanHeatIsland2023" class="csl-entry" role="doc-biblioentry">
Técher, M., Ait Haddou, H. and Aguejdad, R. (2023) <span>“Urban <span>Heat Island</span>’s <span>Vulnerability Assessment</span> by <span>Integrating Urban Planning Policies</span>: <span>A Case Study</span> of <span>Montpellier Méditerranée Metropolitan Area</span>, <span>France</span>,”</span> <em>Sustainability</em>, 15(3, 3), p. 1820. doi: <a href="https://doi.org/10.3390/su15031820">10.3390/su15031820</a>.
</div>
<div id="ref-usepaLearnHeatIslands2014" class="csl-entry" role="doc-biblioentry">
US EPA, O. (2014) <em>Learn <span>About Heat Islands</span></em>. Available at: <a href="https://www.epa.gov/heatislands/learn-about-heat-islands">https://www.epa.gov/heatislands/learn-about-heat-islands</a> (Accessed: March 23, 2023).
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./week07.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">week_07 - Classification Continue</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./summary.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Summary</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>